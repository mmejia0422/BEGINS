<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pm="http://primefaces.org/mobile"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

    <head>
        <h:outputStylesheet name="./css/cssComponent.css"/>
    </head>

    <body>

        <ui:composition template="./tmplMenuVertical.xhtml">


            <ui:define name="content">
                <div class="container">

                    <h2>#{msg['hCrearPedido']}</h2>
                    <p:separator/>
                    <br/>
                    <h:form>
                        <!--<p:steps activeIndex="1" styleClass="custom" readonly="false">
                        <p:menuitem value="Datos generales"/>
                        <p:menuitem value="Detalle de orden" />
                        <p:menuitem value="Selecci贸n de prioridad" />
                        <p:menuitem value="Revisi贸n" />
                    </p:steps>-->
                        <p:growl id="growl" sticky="true" showDetail="true"/>
                        <p:wizard flowListener="#{cPedidoWizard.onFlowProcess}">
                            <p:tab id="general" title="#{msg['wizGeneralInfo']}">
                                <p:panel header="#{msg['hdInformacionPedido']}">
                                    <p:messages />
                                    <p:panelGrid columns="2" style="margin: 0 auto" class="companyHeaderGrid">
                                        <p:outputLabel for="nombre" value="#{msg['lbNombreCliente']}"/>
                                        <p:selectOneMenu  id="nombre" required="true" filter="true" filterMatchMode="contains" effect="fold"
                                                          value="#{crearPedidoBean.selectedCabecera.cliente.idCliente}">
                                            <f:selectItem itemLabel="#{msg['seleccione']}" itemValue="" />
                                            <f:selectItems value="#{clienteBean.selectItemCliente}"/>
                                        </p:selectOneMenu>

                                        <p:outputLabel for="fechaPedido" value="#{msg['lbFechaPedido']}" />
                                        <p:inputText id="fechaPedido" value="#{currentDate}" disabled="true" required="true">
                                            <f:convertDateTime pattern="dd-MMM-yy hh:mm aa"/>
                                        </p:inputText>

                                        <p:outputLabel for="fechaEntrega" value="#{msg['lbFechaEntrega']}" />
                                        <p:calendar id="fechaEntrega" placeholder="#{msg['phFechaEntrega']}" value="#{crearPedidoBean.selectedCabecera.fechaEntrega}"
                                                    mindate="#{currentDate}" pattern="dd-MMM-yy" required="true"/>

                                        <p:outputLabel for="prioridad" value="#{msg['lbPrioridad']}"/>
                                        <p:selectOneRadio required="true" id="prioridad" value="#{crearPedidoBean.selectedCabecera.prioridadAlta}">
                                            <f:selectItem itemLabel="#{msg['lbBaja']}" itemValue="N"/>
                                            <f:selectItem itemLabel="#{msg['lbAlta']}" itemValue="Y"/>
                                        </p:selectOneRadio>

                                        <p:outputLabel for="desc" value="#{msg['lbDescripcion']}" />
                                        <p:inputTextarea id="desc" placeholder="#{msg['phDescripcion']}" rows="5" cols="25" counter="mostrar" value="#{crearPedidoBean.selectedCabecera.descripcion}"
                                                         maxlength="150" counterTemplate="{0} #{msg['lbChrCounter']}" autoResize="true" />

                                        <h:outputText id="dummy" rendered="true" value=""/>
                                        <h:outputText id="mostrar"/>
                                    </p:panelGrid>
                                </p:panel>
                            </p:tab>
                            <p:tab id="detalle" title="#{msg['wizDetails']}">
                                <p:panel header="#{msg['hdLineaPedido']}">
                                    <p:messages />
                                    <p:panelGrid columns="2" style="margin: 0 auto" class="companyHeaderGrid">
                                        <p:outputLabel for="producto" value="Producto" />
                                        <p:selectOneMenu  id="producto" required="true" valueChangeListener="#{crearPedidoBean.productoCambiaValor}"
                                                          value="#{crearPedidoBean.selectedPedido.catProducto.idCatProducto}">
                                            <f:selectItem itemLabel="Seleccione" itemValue="" />
                                            <f:selectItems value="#{productoBean.selectItemProducto}"/>
                                            <f:ajax event="change" execute="@form" render="change"/>
                                        </p:selectOneMenu>

                                        <p:outputLabel for="cantidad" value="Cantidad"/>
                                        <p:inputNumber id="cantidad" value="#{crearPedidoBean.selectedPedido.cantidad}" minValue="0" decimalPlaces="0" placeholder="Digite la cantidad" required="true"/>

                                        <p:outputLabel for="precio" value="Precio unitario"/>
                                        <p:inputNumber id="precio" decimalSeparator="." thousandSeparator="," 
                                                       value="#{crearPedidoBean.selectedPedido.precio}" minValue="0" decimalPlaces="2" 
                                                       placeholder="Precio de venta" required="true"
                                                       symbol="$"/>

                                        <h:outputText id="dumy1" rendered="true" value=""/>
                                        <h:outputText id="change" value="Precio sugerido: "/>


                                        <p:outputLabel for="comm" value="Comentarios" />
                                        <p:inputTextarea id="comm" value="#{crearPedidoBean.selectedPedido.comentarios}" placeholder="Escriba comentarios adicionales" rows="5" cols="30" counter="display" maxlength="150" counterTemplate="{0} characters remaining." autoResize="true" />

                                        <h:outputText id="dumy" rendered="true" value=""/>
                                        <h:outputText id="display"/>
                                        <br/>
                                    </p:panelGrid>
                                    <div align="center">
                                        <p:commandButton id="btnAgregar" value="Agregar" update="" oncomplete=""/>
                                        <p:commandButton id="btnLimpiar" value="Limpiar campos" update="" oncomplete=""/>
                                    </div>
                                </p:panel>
                                <br/>

                                <p:dataTable resizableColumns="true" rendered="true" editable="true" scrollable="true" 
                                             var="pedido"  value="">
                                    <p:column headerText="Producto">
                                        <h:outputText value=""/>
                                    </p:column>

                                    <p:column headerText="Cantidad">
                                        <h:outputText value="" />
                                    </p:column>

                                    <p:column headerText="Monto">
                                        <h:outputText value="" />
                                    </p:column>

                                    <p:column headerText="Comentarios">
                                        <h:outputText value="" />
                                    </p:column>
                                    <p:column headerText="Acci贸n" style="width:100px;text-align: center">
                                        <p:commandButton id="btnDelete" update="" oncomplete="" icon="icon-delete" title="Eliminar">
                                            <!--Action listener-->
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>

                            <p:tab id="confirmar" title="Revisi贸n">
                                <p:panel header="Confirmar pedido">
                                    <p:messages />
                                    <p:panelGrid columns="2" style="margin: 0 auto" class="companyHeaderGrid">

                                    </p:panelGrid>
                                </p:panel>
                            </p:tab>
                        </p:wizard>
                    </h:form>
                </div>
            </ui:define>
        </ui:composition>

    </body>

</html>
